<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Caregma</title>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- External CSS -->
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <main class="container">
      <!-- HEADER -->
      <header class="header">
        <div class="brand">
          <span class="brand-name">Caregma</span>
        </div>
      </header>

      <!-- HERO -->
      <section>
        <h1>Do not go to critical medical visits alone.</h1>
        <p>
          Caregma provides clinically trained advocates who attend high-stakes
          medical appointments to help patients and families understand what’s
          happening and make safer decisions.
        </p>

        <button class="btn-primary" id="request-cta">
          Request an advocate for an upcoming appointment
        </button>

        <div class="helper-text">
          We’ll contact you within 24 hours to learn more about your visit.
        </div>
      </section>

      <!-- TRUST -->
      <section>
        <p class="muted">
          No medical advice. Clear scope of support. Background-checked
          advocates.
        </p>
      </section>

      <!-- WHAT WE DO -->
      <section>
        <h2>What Caregma Does</h2>
        <p>
          We support patients and families before, during, and after critical
          medical visits— when decisions feel overwhelming and stakes are high.
        </p>

        <ul>
          <li>Help prepare questions ahead of the visit</li>
          <li>Attend appointments in person (or virtually when needed)</li>
          <li>Take structured notes in plain language</li>
          <li>Clarify decisions and next steps afterward</li>
        </ul>
      </section>

      <!-- ONE SERVICE -->
      <section>
        <h2>Appointment Representation for High-Stakes Visits</h2>
        <p class="muted">Our initial focus</p>

        <ul>
          <li>New diagnosis appointments</li>
          <li>Treatment planning visits</li>
          <li>Specialist or second-opinion consults</li>
        </ul>

        <p>
          These moments are emotionally urgent, time-bound, and difficult to
          navigate alone.
        </p>
      </section>

      <!-- HOW IT WORKS -->
      <section>
        <h2>How It Works</h2>
        <ol>
          <li>Request an advocate for an upcoming appointment</li>
          <li>We contact you within 24 hours</li>
          <li>We confirm details and discuss support options</li>
          <li>An advocate attends the visit and provides a clear summary</li>
        </ol>
      </section>

      <!-- CTA -->
      <section>
        <button class="btn-primary" id="request-cta">
          Request an advocate for an upcoming appointment
        </button>
      </section>

      <!-- FORM -->
      <section id="intake" class="intake hidden">
        <h2>Request an advocate for an upcoming medical visit</h2>

        <form
          id="advocate-form"
          method="POST"
          action="https://formspree.io/f/mzddjybl"
        >
          <label>Appointment date *</label>
          <input type="date" name="appointment_date" required />

          <label>Hospital or clinic</label>
          <input type="text" name="hospital" />

          <label>Visit type</label>
          <select name="visit_type">
            <option>New diagnosis</option>
            <option>Treatment planning</option>
            <option>Specialist consult</option>
          </select>

          <label>Zip code</label>
          <input type="text" name="zip_code" />

          <label>Email *</label>
          <input type="email" name="email" required />

          <label>Phone *</label>
          <input type="tel" name="phone" required />

          <label>What worries you most about this visit? (optional)</label>
          <textarea name="concerns"></textarea>

          <button type="submit" class="btn-primary">Request an advocate</button>
        </form>
        <p id="form-status" class="form-status" style="display: none"></p>

        <div id="thank-you" style="display: none">
          <h2>Thanks — we’ll reach out within 24 hours.</h2>
          <p class="muted">
            We’ve received your request and will personally follow up to learn
            more about your visit.
          </p>
        </div>
      </section>

      <!-- FOOTER -->
      <footer>
        Caregma is an independent patient support service. Not medical advice.
      </footer>
    </main>

    <script>
      const ctaButtons = document.querySelectorAll("#request-cta");
      const intakeSection = document.getElementById("intake");

      ctaButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          intakeSection.classList.remove("hidden");
          intakeSection.scrollIntoView({ behavior: "smooth" });
        });
      });

      const form = document.getElementById("advocate-form");
      const thankYou = document.getElementById("thank-you");
      const status = document.getElementById("form-status");
      const submitButton = form.querySelector('button[type="submit"]');

      let isSubmitting = false;

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Prevent double submission
        if (isSubmitting) return;
        isSubmitting = true;

        submitButton.disabled = true;
        submitButton.textContent = "Submitting...";
        status.textContent = "Sending your request...";
        status.className = "form-status loading";
        status.style.display = "block";

        try {
          const formData = new FormData(form);

          const response = await fetch(form.action, {
            method: "POST",
            body: formData,
            headers: {
              Accept: "application/json",
            },
          });

          if (response.ok) {
            form.style.display = "none";
            status.style.display = "none";
            thankYou.style.display = "block";
            thankYou.scrollIntoView({ behavior: "smooth" });
          } else {
            throw new Error("Submission failed");
          }
        } catch (error) {
          status.textContent =
            "Something went wrong. Please try again or contact us directly.";
          status.className = "form-status error";
          submitButton.disabled = false;
          submitButton.textContent = "Request an advocate";
          isSubmitting = false;
        }
      });

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const formData = new FormData(form);

        const response = await fetch(form.action, {
          method: "POST",
          body: formData,
          headers: {
            Accept: "application/json",
          },
        });

        if (response.ok) {
          form.style.display = "none";
          thankYou.style.display = "block";
          thankYou.scrollIntoView({ behavior: "smooth" });
        } else {
          alert("Something went wrong. Please try again.");
        }
      });
    </script>
  </body>
</html>
